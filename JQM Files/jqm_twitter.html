<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
	<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
	<script>

	    $(document).ready(function(){
	    	loadTwitter( 'guitars','twitterlist');
	    });
	    $(document).bind("mobileinit",function(){
	    	
	    });
	    function loadTwitter( query, toUlQuery)
	    {
	    	var url = 'http://search.twitter.com/search.json?q=' + query;
	    	console.log('Loading twitter: ' + url);
	    	
	    	$.ajax({
	    		url: url,
	    		success: function( data ) {
	    			console.log( data );
	    			
	    			$( toUlQuery ).empty();
	    			
	    			for( var i=0; i < data.results.length; i++) {
	    				var li = $('<li>' +
	    						        '<a href="http://www/twitter.com/' + data.results[i].from_user +'">' +
	    				                '<img height="82" src="' + data.results[i].profile_image_url + '" />' +
	    				                '<p>' + data.results[i].text + '</p>' +
	    				                '</a>' +
	    				                '</li>');
	    	            $( toUlQuery ).append( li );
	    			}
	    			
	    			$(toUlQuery).listview('refresh');
	    		}
	    	});
	    }
	</script>
	<title>My basic jqm page</title>
</head>
<body>

	<div data-role="page" id="home">
		<div data-role="header">
			<h1>jqm page 1</h1>
		</div>
		<div data-role="content">
		    <h3>Some list from a web service </h3>
		    <ul data-role="listview" id="twitterlist">
		        <li>TEST</li>
		    </ul>
			<p><a href="#page2">Page 2</a></p>
			
		</div>
	</div>
	
	<div data-role="page" id="page2">
		<div data-role="header">
			<h1>jqm page 2</h1>
		</div>
		<div data-role="content">
			<p><a href="#home">Back Home</a></p>
		</div>
	</div>
	
	
	<script>
		$(document).ready(function() {
			
		});
		
		$(document).bind("mobileinit", function() {
		
		});
	</script>
</body>
</html>